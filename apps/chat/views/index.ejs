<html ng-app="societyProChatApp">
  <head>
    <title>Ship | <%= version %></title>
	<link href="web/images/favicon.png" rel="shortcut icon" />
<!--   Styles    -->
    <link href='web/bower_components/angular-emoji-filter/dist/emoji.min.css' rel='stylesheet' type='text/css'>
    <link href="web/styles/jquery.textcomplete.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="web/bower_components/angular-material/angular-material.css">
    <link rel='stylesheet' href='web/bower_components/perfect-scrollbar/css/perfect-scrollbar.css'/>
    <link rel="stylesheet" type="text/css" href="web/styles/society-pro-chat.css">
    <link href="web/styles/custom.css" rel="stylesheet" type="text/css">
    <!--[if IE]>
    <link rel="stylesheet" type="text/css" href="web/styles/society-pro-chat-ie-support.css">
    <![endif]-->
<!--             -->

<!--  Scripts    -->
    <script type="text/javascript" src="web/bower_components/jquery/dist/jquery.min.js"></script>
    <script src='web/bower_components/perfect-scrollbar/js/perfect-scrollbar.jquery.js'></script>
    <script src="web/bower_components/angular/angular.min.js"></script>
    <script type="text/javascript" src="web/bower_components/angular-aria/angular-aria.js"></script>
    <script type="text/javascript" src="web/bower_components/angular-animate/angular-animate.js"></script>
    <script type="text/javascript" src="web/bower_components/angular-material/angular-material.js"></script>
    <script type="text/javascript" src="web/bower_components/angular-sanitize/angular-sanitize.js"></script>
    <script src="web/js/components/services/services.js"></script>
    <script src="web/js/components/global/global.js"></script>
    <script src="web/js/components/directives/directives.js"></script>
    <script src="web/js/components/controllers/mainController.js"></script>
    <script src="web/js/components/controllers/stageController.js"></script>
    <script src="web/js/components/controllers/cardController.js"></script>
    <script src="web/js/jquery.autosize.js" type="text/javascript"></script>
    <script src="web/bower_components/angular-emoji-filter/dist/emoji.min.js" type="text/javascript"></script>
    <script src="web/js/emoticonsService.js" type="text/javascript"></script>
    <script src="web/js/app.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <!--
    <script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
    -->
<!--             -->
  </head>
  <body
    ng-controller="mainController"
    layout="column"
    layout-fill
    data-soproenv="<%= config.env %>"
    data-currentuser="<%= currentUser %>"
    data-soprobaseurl="<%= config.servers.express.baseUrl %>"
  >
    <md-toolbar layout="row">
      <span id="logo-loco" layout="row" layout-align="start center">
        <span id="logo-text">Central Services <!--<span id="version-text"> v<%= version %></span>--></span>
       
        <img id="trigger-arrow" src="web/images/trigger-arrow.png"/>
      </span>
      <div class="sopro-company-panel">
        <a href="/admin" class="edit">Administration</a>
        <!--<a href="/admin" class="mail">Send invitations</a>
        <a href="/admin">Sign in to another team</a>-->
        <a href="/admin" class="sign-out">Sign out</a>
      </div>
      <div class="navbar-container" layout="row" layout-align="start center" flex>
        <span id="member-name" flex>
          <span ng-show="openChannel.soproModel !== 'channel'">@</span><strong ng-bind="openChannel.name"></strong>
          <img ng-show="openChannel.soproModel !== 'channel'" ng-src="web/images/icon-peers-circle.png" alt="channel-icon" src="web/images/icon-peers-circle.png">
          <img class="trigger-arrow-gray" ng-src="web/images/trigger-arrow-gray.png" alt="channel-icon" src="web/images/trigger-arrow-gray.png"/>
        </span>
        <div class="sopro-user-panel">
          <!--<a href="/admin" class="edit">View Profile</a>
          <a href="/admin" class="mail">View Files</a>
          <a href="/admin">Invite to a Channel</a>-->
		  <a href="/admin">Set topic</a>
        </div>
		
		<a id="user-count">{{members.length}}</a>

		<div class="sopro-count-panel">
		  <a href="" class="dropdown-item" ng-repeat="item in members">
			<!--
			<img src="web/avatars/avatar1.png">
			-->
			{{item.name}}
			<!--
			<span class="offline"></span>
			-->
		  </a>
        </div>

        <div
        id="role-selection"
        layout="row"
        ng-click="showRoles=!showRoles"
        layout-align="center center"
        >
          <input id="search-input" placeholder="Search apps, websites, files and chats..." type="text">
          <img id="trigger-avatar" ng-src="data:image/png;base64,{{currentRole.avatar}}" alt="role-icon">
          <!--
          <span class="roleLabel">{{currentRole.name}}</span>
          <img src="web/images/role-arrow.png" width="10" height="5" alt="arrow-role"/>
          -->
          <!--<a id="hamburguer"></a>-->
        </div>
        <div class="sopro-role-panel">
          <!--<a href="/admin" class="edit"  >Preferences</a>
          <a href="/admin" class="gear" >Your account</a>
          <a href="/admin" >Your profile</a>
          <a href="/admin" >Change your photo</a>
          <a href="/admin" >Set yourself away</a>

          <% if (!features.ee.fixedUserIdentities) { %>
          <span class="sopro-role-panel-title">ROLES</span>
          <div class="sopro-role-item" ng-class="{'sp-w-b':$last}" layout="row" layout-align="start center" ng-repeat="role in roles" ng-click="changeRole(role)">
            <img ng-src="data:image/png;base64,{{role.avatar}}" alt="role-icon">
            <span class="sopro-role-name">{{role.name}}</span>
          </div>
          <% } %>
          <% if (permissions.getAdmin) { %>
          <a href="/admin" id="adminPanelLink">Admin Panel</a>
          <% } %>-->
          <a href="/logout" class="sign-out roleLogout" >Sign out</a>
        </div>
      </div>
    </md-toolbar>
    <div class="sopro-main-content" flex layout="row">
      <md-content id="sopro-collections-wrap">
        <!--<collection
          id="collection-favorites"
          channel-title="FAVORITES"
          userexpandable="true"
          icon="web/images/icon-star.png"
          repeater="favorites"
          sopro-template-url="web/partials/collection-peer.html"
        ></collection>-->
        <collection
          id="collection-channels"
          channel-title="CHANNELS"
          userexpandable="true"
          icon="web/images/icon-channels-lines.png"
          repeater="myChannels"
          sopro-template-url="web/partials/collection-channel.html"

        ></collection>
        <collection
          id="collection-peers"
          channel-title="MEMBERS"
          icon="web/images/icon-peers-circle.png"
          repeater="peers"
          sopro-template-url="web/partials/collection-peer.html"
        ></collection>
        <!--<collection
          id="collection-private"
          channel-title="PRIVATE
          CHANNELS"
          icon="web/images/icon-lock.png"
          repeater="privateChannels"
          sopro-template-url="web/partials/collection-peer.html"
        ></collection>
        <collection
          id="collection-decks"
          channel-title="DECKS"
          icon="web/images/icon-decks.png"
          repeater="myChannels"
          sopro-template-url="web/partials/collection-peer.html"
        ></collection>
        <a id="more-unread">more unread</a>-->
      </md-content>
      <sopro-collections-dropdown
        ng-show="showCollectionsOverflow"
        class="md-whiteframe-z2"
      ></sopro-collections-dropdown>
      <sopro-subscribers-dropdown
        ng-show="showSubscribersOverflow"
        class="md-whiteframe-z2"
      ></sopro-subscribers-dropdown>
      <md-content flex layout="row" layout-wrap id="main-stage" ng-controller="stageController">
        <ng-include
          layout="column"
          flex="{{card.size}}"
          flex-md="100"
          ng-repeat="card in stageCards"
          src="card.template"
          ng-if="$first"
          ng-controller="historyCardController"
        ></ng-include>
        <ng-include
          layout="column"
          flex="{{creationCard.size}}"
          flex-md="100"
          src="creationCard.template"
          ng-show="creationCard.show"
        ></ng-include>
      </md-content>
    </div>
    <script src="web/js/jquery.textcomplete.js"></script>
    <script src="web/js/main.js"></script>
  </body>
</html>
