<!DOCTYPE html>
<html ng-app="confirmAccount">
<head>
    <title>SocietyPro Chat</title>

    <link rel="stylesheet" type="text/css" href="/web/bower_components/angular-material/angular-material.css">
    <link rel="stylesheet" type="text/css" href="/web/styles/society-pro-chat.css">

    <script type="text/javascript" src="/web/bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="/web/bower_components/angular/angular.min.js"></script>
    <script type="text/javascript" src="/web/bower_components/angular-aria/angular-aria.js"></script>
    <script type="text/javascript" src="/web/bower_components/angular-animate/angular-animate.js"></script>
    <script type="text/javascript" src="/web/bower_components/angular-material/angular-material.js"></script>
    <script type="text/javascript" src="/web/bower_components/angular-ui-utils/modules/validate/validate.js"></script>
    <script type="text/javascript">
      var confirmAccount = angular.module('confirmAccount', ['ngMaterial', 'ui.validate'])
    </script>
</head>
<body layout="column" layout-fill data-soproenv="<%= config.env %>">
  <md-toolbar layout="row">

  </md-toolbar>
  <div class="sopro-main-content" flex layout="row">
    <md-content flex layout="column" layout-wrap id="main-stage">
      <p>Welcome to the haven of Captains of Society Pro<% if (currentUser) { %>, <%= currentUser.username %><% } %>!</p>
      <p>Please set your password:</p>
      <form action="/confirmAccount/done" method="POST" name="passwordForm">
        <div layout="row">
          <md-input-container>
            <label> Password: </label>
            <input type="password" name="password1" ng-model="password1" ng-required="true"></input>
          </md-input-container>
          <md-input-container>
            <label> Password again: </label>
            <input type="password" name="password2" ng-model="password2" ui-validate=" '$value==password1' " ui-validate-watch=" 'password1' " ng-required="true"></input>
            <div ng-messages="passwordForm.password2.$error" ng-show="passwordForm.password2.$dirty && passwordForm.password2.$error.validator">
              <div ng-message="validator">The passwords don't match!</div>
            </div>
          </md-input-container>
        </div>
        <input type="hidden" name="token" value="<%= token %>">
        <input block type="submit" value="Submit" ng-disabled="passwordForm.$invalid"></input>
      </form>
    </md-content>
  </div>
</body>
</html>